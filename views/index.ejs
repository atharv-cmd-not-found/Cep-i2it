<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Canteen Reviews</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <header>
  <h1 class="title">ğŸ´ Canteen Reviews</h1>
  <div class="actions">
    <a href="/posts/new" class="btn-create">+ Add Review</a>
    <a href="/ana" class="btn-dashboard">ğŸ“Š Dashboard</a>
  </div>
</header>


  <main class="container">
    <div class="posts">
     <% posts.forEach(post => { %>
        <div class="post">
          <h3 class="username">@<%= post.username %></h3>
          <p class="content"><%= post.content %></p>
          
          <!-- Show image if available -->
          <% if(post.image) { %>
            <img src="/uploads/<%= post.image %>" alt="Review Image" class="post-image">
          <% } %>

          <!-- Star Rating -->
          <div class="stars">
            <% for(let i=1; i<=5; i++){ %>
              <% if(i <= post.rating){ %>
                â˜…
              <% } else { %>
                â˜†
              <% } %>
            <% } %>
          </div>

          <!-- Timestamps -->
          <div class="timestamps">
            <p>Posted on: <%= post.createdAt.toLocaleString() %></p>
            <% if (post.updatedAt && post.updatedAt.getTime() !== post.createdAt.getTime()) { %>
              <p>Last updated: <%= post.updatedAt.toLocaleString() %></p>
            <% } %>
          </div>

          <div class="post-actions">
            <a href="/posts/<%= post.id %>" class="btn-view">View</a>
            <a href="/posts/<%= post.id %>/edit" class="btn-edit">Edit</a>

            <!-- Delete Form -->
            <form method="POST" action="/posts/<%= post.id %>?_method=DELETE" class="delete-form">
              <button type="submit" class="btn-delete">Delete</button>
            </form>
          </div>
        </div>
     <% }) %>
    </div>
  </main>
</body>
</html>
